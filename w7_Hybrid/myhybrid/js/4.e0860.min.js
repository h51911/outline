(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{241:function(t,e,o){"use strict";o(127);var a=o(91),i=(o(128),o(67)),s=o(0),n=o.n(s),r=o(37),c=o(1),l=o.n(c);const d=({datalist:t,history:e,title:o})=>n.a.createElement(n.a.Fragment,null,o?n.a.createElement("h4",null,o):null,n.a.createElement(a.a,{gutter:30},t.map(t=>n.a.createElement(i.a,{key:t.goods_id,style:{minHeight:280},xs:12,sm:6,md:4,onClick:()=>{e.push("/goods/"+t.goods_id)}},n.a.createElement("img",{src:t.goods_image_url||t.goods_image,style:{width:"100%"}}),n.a.createElement("h5",null,t.goods_name),n.a.createElement("p",{className:"price"},n.a.createElement("del",null,t.goods_promotion_price),n.a.createElement("span",null,(.8*t.goods_promotion_price).toFixed(2)))))));d.propTypes={datalist:l.a.array.isRequired,title:l.a.string},e.a=Object(r.g)(d)},251:function(t,e,o){"use strict";o.d(e,"a",(function(){return i})),o.d(e,"b",(function(){return s})),o.d(e,"d",(function(){return n})),o.d(e,"c",(function(){return r}));var a=o(93);function i(t){return{type:a.a,payload:t}}function s(t,e){return{type:a.b,payload:{goods_id:t,goods_qty:e}}}function n(t){return{type:a.d,payload:t}}function r(){return{type:a.c}}},274:function(t,e,o){var a=o(26),i=o(275);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var s={insert:"head",singleton:!1},n=(a(t.i,i,s),i.locals?i.locals:{});t.exports=n},275:function(t,e,o){(e=o(27)(!1)).push([t.i,".img-container{position:relative}.img-container img{width:100%}.img-container .anticon-heart{position:absolute;top:10px;right:10px}.img-container .btnBack{position:absolute;left:10px;top:10px}.img-container .btnBack:hover{background-Color:rgba(0,0,0,0.3)}\n",""]),t.exports=e},311:function(t,e,o){"use strict";o.r(e);o(130);var a=o(84),i=(o(131),o(15)),s=o(0),n=o.n(s),r=o(92),c=o(241),l=(o(274),o(58)),d=(o(121),o(251));let p={mt:{marginTop:20},pd:{padding:15}};class g extends s.Component{constructor(...t){super(...t),this.state={data:{},commedList:[]},this.goto=t=>{this.props.history.push("/goods/"+t)},this.getData=async()=>{let{id:t}=this.props.match.params,e=await r.b.get({act:"goods",op:"goods_detail",goods_id:t});console.log(e);let{goods_image:o,goods_info:a,goods_commend_list:i}=e.datas;this.setState({data:{...a,goods_image:o},commedList:i})},this.addToCart=()=>{let{cartlist:t,dispatch:e}=this.props,{goods_id:o,goods_name:a,goods_price:i,goods_image:s}=this.state.data,n=t.filter(t=>t.goods_id===o)[0];if(n)e(Object(d.b)(o,n.goods_qty+1));else{let t={goods_id:o,goods_name:a,goods_price:i,goods_image:s,goods_qty:1};e(Object(d.a)(t))}},this.buyNow=()=>{this.addToCart(),this.props.history.push("/cart")}}componentDidMount(){this.getData()}componentDidUpdate(t,e){console.log("componentDidUpdate"),t.match.params.id!=this.props.match.params.id&&(console.log("getData"),this.getData())}render(){console.log("Goods",this.props);let{data:t,commedList:e}=this.state;return n.a.createElement("div",null,n.a.createElement("div",{className:"img-container"},n.a.createElement("img",{src:t.goods_image}),n.a.createElement(i.a,{type:"heart",style:{fontSize:30,color:"#f00"}}),n.a.createElement(i.a,{className:"btnBack",type:"arrow-left",style:{fontSize:30,color:"#f00"},onClick:()=>{this.props.history.goBack()}})),n.a.createElement("div",{style:p.pd},n.a.createElement("h1",null,t.goods_name),n.a.createElement("p",{className:"price"},n.a.createElement("del",null,t.goods_price),n.a.createElement("span",null,(.8*t.goods_promotion_price).toFixed(2))),n.a.createElement(a.a.Group,null,n.a.createElement(a.a,{icon:"shopping-cart",size:"large",onClick:this.addToCart},"添加到购物车"),n.a.createElement(a.a,{icon:"shopping",type:"danger",size:"large",onClick:this.buyNow},"立即购买"))),n.a.createElement("div",{style:p.pd},n.a.createElement(c.a,{datalist:e,title:"推荐列表"})))}}g=Object(l.b)(t=>({cartlist:t.cart.cartlist}),t=>({dispatch:t}))(g),e.default=g}}]);